!function t(e,i,a){function s(n,r){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!r&&h)return h(n,!0);if(o)return o(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[n]={exports:{}};e[n][0].call(l.exports,function(t){var i=e[n][1][t];return s(i?i:t)},l,l.exports,t,e,i,a)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}({1:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var s=t("./states/boot"),o=a(s),n=t("./states/game"),r=a(n),h=t("./states/gameover"),c=a(h),l=t("./states/menu"),u=a(l),d=t("./states/preloader"),y=a(d),p=t("./states/running"),m=a(p),g=window.innerWidth,f=window.innerHeight;g>900&&(g=900),f>600&&(f=600);var k=new Phaser.Game(g,f,Phaser.AUTO,"runner-game");k.state.add("boot",new o.default),k.state.add("game",new r.default),k.state.add("gameover",new c.default),k.state.add("menu",new u.default),k.state.add("preloader",new y.default),k.state.add("running",new m.default),k.state.start("boot")},{"./states/boot":5,"./states/game":6,"./states/gameover":7,"./states/menu":8,"./states/preloader":9,"./states/running":10}],2:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(t,i,o,n,r,h,c,l){a(this,e);var u=s(this,Object.getPrototypeOf(e).call(this,t,i,o,"horse",n));return console.log(t,i,o,n,"bullet sprite referenced from game state",r,"inifinite run: no velocity test",h,"custom param3",c,"custom param 4",l),u.anchor.setTo(.5,.5),u.animations.add("walk"),u.animations.play("walk",30,!0),u.maxVelocity=1e3,u.acceleleration=100,u.gravity=1600,u.velocityX=0,u.infinite=h,u.accelerate=!0,u.onGround=!1,u.doubleJump=!1,u.tripleJump=!1,u.jumpHeight=-750,u.dashing=!1,u.dashingVelocity=0,u.dashingFor=0,u.dashSet=300,u.dashSpeed=1e3,u.dashNext=0,u.direction=1,u.directDelay=100,u.game.physics.enable(u),u.body.maxVelocity.setTo(u.maxVelocity,u.maxVelocity),u.body.gravity.y=u.gravity,u.body.collideWorldBounds=!0,u.body.tilePadding.set(50,50),u.nextFire=0,u.fireRate=50,u.ammoAmount=24,u.ammo=u.ammoAmount,u.reloadDelay=0,u.reloadSpeed=2e3,u.gun=u.game.add.group(),u.gun.enableBody=!0,u.gun.physicsBodyType=Phaser.Physics.ARCADE,u.gun.createMultiple(2*u.ammoAmount,"rocket"),u.gun.setAll("checkWorldBounds",!0),u.gun.setAll("outOfBoundsKill",!0),h||u.game.camera.follow(u,Phaser.Camera.FOLLOW_PLATFORMER),u}return o(e,t),n(e,[{key:"update",value:function(){this.dashing&&this.dashingAttack(),this.movementUpdate()}},{key:"movementUpdate",value:function(){this.infinite?(Math.abs(this.velocityX)<this.maxVelocity/2?this.direction?this.velocityX+=1:this.velocityX-=1:this.direction?this.velocityX-=5:this.velocityX+=5,this.dashing?this.direction?this.body.velocity.x=this.dashSpeed:this.body.velocity.x=-this.dashSpeed:this.body.position.x>7*this.game.world.width/8?this.body.velocity.x=-600:this.body.position.x>1*this.game.world.width/6&&this.direction?this.body.velocity.x=-200:this.body.position.x<1*this.game.world.width/8?this.body.velocity.x=600:this.body.position.x<3*this.game.world.width/4&&!this.direction?this.body.velocity.x=200:(this.body.velocity.x=0,this.accelerate||(this.velocityX=0))):this.accelerate?(this.direction?this.body.acceleration.x=this.acceleleration:this.body.acceleration.x=-this.acceleleration,this.velocityX=this.body.velocity.x):this.dashing&&(this.body.velocity.x=this.velocityX),Math.abs(this.velocityX)>475&&Math.abs(this.velocityX)<510&&(this.direction?this.velocityX=500:this.velocityX=-500),Math.abs(this.velocityX/20)>5?this.animations._anims.walk.speed=Math.abs(this.velocityX/20):this.animations._anims.walk.speed=5,console.log(this.direction,"accel ",this.accelerate,"dash ",this.dashing,"jump ",this.doubleJump,this.tripleJump,this.velocityX)}},{key:"movePlayerPosition",value:function(t){this.body.position.x>7*this.game.world.width/8}},{key:"inputLeft",value:function(){this.direction&&!this.dashing?this.changeDirection():this.direction&&this.dashing?(this.jump(),this.changeDirection()):!this.direction&&this.dashing||this.game.time.now>this.dashNext&&this.dashReset()}},{key:"inputRight",value:function(){console.log("input right",this.direction,this.dashing),this.direction||this.dashing?!this.direction&&this.dashing?(this.jump(),this.changeDirection()):this.direction&&this.dashing||this.game.time.now>this.dashNext&&this.dashReset():this.changeDirection()}},{key:"inputDown",value:function(){this.body.velocity.y=1e4}},{key:"inputUp",value:function(){}},{key:"acivteInput",value:function(t){this.fire(t)}},{key:"dashingAttack",value:function(){this.game.time.now<this.dashingFor?this.velocityX=this.dashingVelocity:(this.dashing=!1,this.accelerate=!0)}},{key:"dashReset",value:function(){this.dashing=!0,this.dashingFor=this.dashSet+this.game.time.now,this.dashNext=2*this.dashSet+this.game.time.now,this.direction?this.dashingVelocity=this.dashSpeed:this.dashingVelocity=-this.dashSpeed,this.infinite?this.velocityX/=5:this.body.velocity.x/=5}},{key:"changeDirection",value:function(){this.game.time.now>this.directDelay&&(this.directDelay=this.game.time.now+500,this.direction?this.direction=0:this.direction=1,this.animations._anims.walk.speed=5,this.scale.x*=-1,this.infinite?this.velocityX=0:this.body.velocity.x=0,this.accelerate=!1)}},{key:"fire",value:function(t){this.fireAt=t,this.game.time.now>this.nextFire&&this.gun.countDead()>0&&this.ammo>0?(this.nextFire=this.game.time.now+this.fireRate,this.bullet=this.gun.getFirstDead(),this.bullet.reset(this.x,this.y),this.bullet.anchor.setTo(.5,.5),this.bullet.rotation=this.game.physics.arcade.moveToPointer(this.bullet,1e3,this.fireAt),this.ammo--,0===this.ammo&&(this.reloadDelay=this.game.time.now+this.reloadSpeed)):0===this.ammo&&this.game.time.now>this.reloadDelay&&(this.ammo=this.ammoAmount)}},{key:"jump",value:function(){(this.doubleJump||this.tripleJump||this.onGround)&&(this.body.velocity.y=this.jumpHeight,this.jumpReset())}},{key:"jumpReset",value:function(){console.log("jumpreset",this.onGround,this.doubleJump,this.tripleJump),!this.onGround||this.doubleJump||this.tripleJump?this.onGround||!this.doubleJump||this.tripleJump?!this.onGround&&this.doubleJump&&this.tripleJump?(this.doubleJump=!1,this.tripleJump=!1):console.log("error",this.doubleJump,this.tripleJump,this.onGround):this.tripleJump=!0:this.doubleJump=!0}}]),e}(Phaser.Sprite);i.default=r},{}],3:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(t,i,o,n,r,h,c,l){a(this,e);var u=s(this,Object.getPrototypeOf(e).call(this,t,i,o,"hero",n));return u.anchor.setTo(.5,.5),u.scale.setTo(2),u.maxVelocity=1e3,u.infinite=h,u.onGround=!1,u.acclerationSpeed=200,u.maxAcceleration=600,u.gravity=1500,u.game.physics.enable(u),u.body.maxVelocity.setTo(u.maxVelocity,u.maxVelocity),u.body.gravity.y=u.gravity,u.body.collideWorldBounds=!0,u.body.tilePadding.set(50,50),u.playerHitBox=u.body.width,u.animations.add("RightStanceLow",[0],1,!0),u.animations.add("RightStanceHigh",[2],1,!0),u.animations.add("RightAttackLtoH",[0,5,2],24,!1),u.animations.add("RightAttackHtoL",[2,1,0],24,!1),u.animations.add("RightSlash",[3,1,0],12,!1),u.animations.add("RightDash",[3],60,!1),u.animations.add("RightDodge",[4],1,!1),u.animations.add("RightDuck",[17],1,!0),u.animations.add("RightDuckAttack",[17,16,15],12,!1),u.animations.add("LeftStanceLow",[6],1,!0),u.animations.add("LeftStanceHigh",[8],1,!0),u.animations.add("LeftAttackLtoH",[8,9,6],24,!1),u.animations.add("LeftAttackHtoL",[6,7,8],24,!1),u.animations.add("LeftDash",[11],60,!1),u.animations.add("LeftDodge",[10],1,!1),u.animations.add("LeftDuck",[12],1,!0),u.animations.add("LeftDuckAttack",[12,13,14],12,!1),u.animations.play("RightStanceLow"),u.doubleJump=!1,u.tripleJump=!1,u.jumpHeight=-750,u.attacking=!1,u.attackAnimationSwitch=!1,u.attackFor=0,u.attackDelay=50,u.attackOffSet=.8*u.body.width,u.attackCounter=0,u.chargeAttackLeft=!1,u.chargeAttackRight=!1,u.chargeTime=5,u.chargingFor=0,u.dashing=!1,u.dashFor=0,u.dashSet=300,u.dashVelocity=1e3,u.ducking=!1,u.stomping=!1,u.stompCharge=0,u.direction=1,u.nextFire=0,u.fireRate=50,u.ammoAmount=24,u.ammo=u.ammoAmount,u.reloadDelay=0,u.reloadSpeed=900,u.gun=u.game.add.group(),u.gun.enableBody=!0,u.gun.physicsBodyType=Phaser.Physics.ARCADE,u.gun.createMultiple(2*u.ammoAmount,"rocket"),u.gun.setAll("checkWorldBounds",!0),u.gun.setAll("outOfBoundsKill",!0),h||u.game.camera.follow(u,Phaser.Camera.FOLLOW_PLATFORMER),u}return o(e,t),n(e,[{key:"update",value:function(){this.dashing&&this.game.time.now>this.dashFor&&this.dashAttack(),this.stomping&&(this.onGround?this.stompAttack():this.stompCharge++)}},{key:"inputLeft",value:function(){this.direction&&!this.dashing?this.changeDirection():this.attack("left")}},{key:"inputRight",value:function(){this.direction||this.dashing?this.attack("right"):this.changeDirection()}},{key:"inputCharged",value:function(){this.chargeAttackLeft=!1,this.chargeAttackRight=!1,this.chargeTime<this.chargingFor?this.dashReset():this.attack("charge")}},{key:"inputDown",value:function(){this.downSpecial()}},{key:"inputUp",value:function(){this.jump()}},{key:"acivteInput",value:function(t){this.fire(t)}},{key:"downSpecial",value:function(){this.onGround?(this.ducking=!0,this.direction?this.animations.play("RightDuck"):this.animations.play("LeftDuck")):(this.body.velocity.y=1e3,this.stomping=!0)}},{key:"stompAttack",value:function(){console.log(this.stompCharge),this.stomping=!1,this.attack("stomp")}},{key:"attack",value:function(t){if(console.log("attack method being called",t,this.dashing),this.game.time.now>this.attackFor)switch(console.log("attack method within attackFor constraint",t,this.chargingFor,this.chargeAttackLeft,this.chargeAttackRight),this.attackFor=this.game.time.now+this.attackDelay,t){case"left":this.chargeAttackLeft?this.chargingFor++:this.ducking?this.slashSword(1,"duckAttack"):this.slashSword(1,"tapAttack"),this.chargeAttackLeft=!0;break;case"right":this.chargeAttackRight?this.chargingFor++:this.ducking?this.slashSword(1,"duckAttack"):this.slashSword(1,"tapAttack"),this.chargeAttackRight=!0;break;case"dash":this.slashSword(2,"dashAttack");break;case"charge":break;case"stomp":this.slashSword(this.stompCharge/8,"stompAttack"),this.changeDirection(),this.slashSword(this.stompCharge/8,"stompAttack"),this.changeDirection(),this.stompCharge=0,console.log("heyo")}}},{key:"slashSword",value:function(t,e){this.bullet=this.gun.getFirstDead(),this.bullet.attackType=e,this.bullet.scale.setTo(t),this.bullet.reset(this.x+this.attackOffSet,this.y),this.bullet.anchor.setTo(.5,.5),this.bullet.lifespan=10,this.slashSwordAnimation(),this.chargingFor=0,this.body.velocity.x=0,this.ducking=!1}},{key:"slashSwordAnimation",value:function(){this.attackAnimationSwitch?(this.direction?this.animations.play("RightAttackHtoL"):this.animations.play("LeftAttackHtoL"),this.attackAnimationSwitch=!1):(this.direction?this.animations.play("RightAttackLtoH"):this.animations.play("LeftAttackLtoH"),this.attackAnimationSwitch=!0)}},{key:"dashReset",value:function(){console.log("dash"),this.dashing=!0,this.ducking=!1,this.scale.setTo(2),this.dashFor=this.game.time.now+this.dashSet,this.direction?this.body.velocity.x=this.dashVelocity:this.body.velocity.x=-this.dashVelocity,this.direction?this.animations.play("RightDash"):this.animations.play("LeftDash")}},{key:"dashAttack",value:function(t){console.log("dashAttack"),this.chargingFor=0,this.game.time.events.add(50,function(){this.dashing=!1},this),this.direction?this.attack("right"):this.attack("left")}},{key:"changeDirection",value:function(){this.direction?this.direction=0:this.direction=1,this.direction?this.body.width=this.playerHitBox:this.body.width=this.playerHitBox,this.attackOffSet*=-1,this.direction?this.animations.play("RightStanceLow"):this.animations.play("LeftStanceLow")}},{key:"fire",value:function(t){console.log(t.x,t.y),this.fireAt=t,this.game.time.now>this.nextFire&&this.gun.countDead()>0&&this.ammo>0?(this.nextFire=this.game.time.now+this.fireRate,this.bullet=this.gun.getFirstDead(),this.bullet.reset(this.x,this.y),this.bullet.anchor.setTo(.5,.5),this.bullet.scale.setTo(1),this.bullet.lifespan=500,this.bullet.rotation=this.game.physics.arcade.moveToPointer(this.bullet,1e3,this.fireAt),this.bullet.attackType="firefirefire",this.ammo--,0===this.ammo&&(this.reloadDelay=this.game.time.now+this.reloadSpeed)):0===this.ammo&&this.game.time.now>this.reloadDelay&&(this.ammo=this.ammoAmount)}},{key:"jump",value:function(){(this.doubleJump||this.tripleJump||this.onGround)&&(this.body.velocity.y=this.jumpHeight,this.jumpReset())}},{key:"jumpReset",value:function(){!this.onGround||this.doubleJump||this.tripleJump?this.onGround||!this.doubleJump||this.tripleJump?!this.onGround&&this.doubleJump&&this.tripleJump?(this.doubleJump=!1,this.tripleJump=!1):console.log("jumping error",this.doubleJump,this.tripleJump,this.onGround):this.tripleJump=!0:this.doubleJump=!0}}]),e}(Phaser.Sprite);i.default=r},{}],4:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(t,i,o,n,r){a(this,e);var h=s(this,Object.getPrototypeOf(e).call(this,t,i,o,"goblin_soldier",n));return h.hero=r,h.game.physics.enable(h,Phaser.Physics.ARCADE),h.enableBody=!0,h.scale.setTo(2),h.anchor.setTo(.5,.5),h.body.gravity.y=2e3,h.body.collideWorldBounds=!0,h.animations.add("walk",[1,2,3,4,5],16,!0),h.animations.add("stand",[0],1,!0),h.animations.add("knock",[7,8,9],10,!1),h.animations.play("walk"),h.standardSpeed=200,h.attackSpeed=800,h.isAttacking=!1,h.isAttackingFor=0,h.isAttackingSet=500,h.isAttackingFrom=0,h.attackingDelay=0,h.attackingDelaySet=4*h.isAttackingSet,h.attackingDirection=!0,h.health=5,h.hitDelay=0,h.hitDelaySet=50,h.knockResistance=0,h.knockEnemy=!1,h.knockBackRecovery=!1,h.knockUp=!1,h.knockVelocity=0,h.knockNormal=300,h.knockStrong=700,h.knockbackFor=0,h.knockbackSet=500,h.knockRecover=0,h}return o(e,t),n(e,[{key:"update",value:function(){0===this.health?this.kill():this.knockEnemy?this.knockBackRecovery||this.knockUp?this.knockBackRecovery&&!this.knockUp?this.checkDelaySum(this.knockRecover)?this.body.velocity.x=0:this.resetAction():this.checkDelaySum(this.knockRecover)?this.body.velocity.x=0:this.resetAction():this.checkDelaySum(this.knockBackFor)||!this.body.onFloor()?this.body.velocity.x=this.knockVelocity:this.knockBackRecover():this.isAttacking?this.checkDelaySum(this.isAttackingFor)?this.body.velocity.x=this.isAttackingFrom:this.resetAction():this.position.x>this.hero.position.x+180||this.position.x<this.hero.position.x-180&&!this.knockEnemy?(this.position.x<this.hero.position.x?this.scale.x=2:this.scale.x=-2,this.position.x>this.hero.position.x?this.body.velocity.x=-this.standardSpeed:this.body.velocity.x=this.standardSpeed,this.animations.play("walk")):this.position.x>this.hero.position.x+90&&this.position.x<this.hero.position.x+180||this.position.x>this.hero.position.x-180&&this.position.x<this.hero.position.x-90&&!this.knockEnemy?this.checkDelaySum(this.attackingDelay)?(this.position.x>this.hero.position.x?this.body.velocity.x=-this.standardSpeed:this.body.velocity.x=this.standardSpeed,this.animations.play("stand")):this.attackHero():(this.body.velocity.x=0,this.animations.play("stand"))}},{key:"attackHero",value:function(){this.attackingDelay=this.setDelay(this.attackingDelaySet),this.isAttacking=!0,this.position.x>this.hero.position.x?this.attackingDirection=!0:this.attackingDirection=!1,this.attackingDirection?this.isAttackingFrom=-this.attackSpeed:this.isAttackingFrom=this.attackSpeed,this.body.velocity.y=-400,this.isAttackingFor=this.setDelay(this.isAttackingSet)}},{key:"hitEnemy",value:function(t){if(console.log("in hit enemy:",t,this.hero.dashing),this.knockUp&&console.log("hit in th eair"),!this.knockEnemy&&!this.checkDelaySum(this.hitDelay))switch(this.hitDelay=this.setDelay(this.hitDelaySet),this.health--,t){case"tapAttack":this.knockResistance>0?this.knockHit():this.knockEnemyBack(this.knockNormal);break;case"tapAttack":this.knockResistance>0?this.knockHit():this.knockEnemyBack(this.knockNormal);break;case"duckAttack":this.knockEnemyUp();break;case"dashAttack":this.knockEnemyBack(this.knockStrong);break;case"collision_":this.knockEnemyBack(this.knockNormal)}}},{key:"knockHit",value:function(){this.knockResistance--,this.body.velocity.x}},{key:"knockEnemyBack",value:function(t){this.knockEnemy=!0,this.hero.direction?this.knockVelocity=t:this.knockVelocity=-t,this.body.velocity.y=-60*(10*Math.random()),this.knockBackFor=this.setDelay(this.knockbackSet),this.animations.play("knock")}},{key:"knockEnemyUp",value:function(){this.knockEnemy=!0,this.knockUp=!0,this.body.velocity.y=-800,this.knockRecover=this.setDelay(this.knockbackSet),this.animations.play("knock")}},{key:"knockBackRecover",value:function(){this.knockBackRecovery=!0,this.knockResistance=0,this.knockRecover=this.setDelay(this.knockbackSet)}},{key:"resetAction",value:function(){this.knockEnemy=!1,this.knockBackRecovery=!1,this.knockUp=!1,this.isAttacking=!1}},{key:"setDelay",value:function(t){return this.game.time.now+t}},{key:"checkDelaySum",value:function(t){return t>this.game.time.now}}]),e}(Phaser.Sprite);i.default=r},{}],5:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(){return a(this,e),s(this,Object.getPrototypeOf(e).call(this))}return o(e,t),n(e,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=4,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={}}}]),e}(Phaser.State);i.default=r},{}],6:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),h=t("../prefabs/avatar"),c=(a(h),t("../prefabs/hero")),l=a(c),u=t("../prefabs/zombie"),d=a(u),y=!1,p=!1,m=function(t){function e(){return s(this,e),o(this,Object.getPrototypeOf(e).call(this))}return n(e,t),r(e,[{key:"preload",value:function(){this.game.time.advancedTiming=!0}},{key:"create",value:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.map=this.game.add.tilemap("floating_garden"),this.map.addTilesetImage("mountain_tiles"),this.map.setCollisionBetween(1,36),this.layer1=this.map.createLayer("layer1"),this.layer1.resizeWorld(),this.layer1.debug=!0,this.rocket=this.game.add.sprite(0,0,"rocket"),this.player=new l.default(this.game,600,680,0,this.rocket,(!1)),this.game.add.existing(this.player),this.player.body.checkCollision.up=!1,this.enemies=this.game.add.group();for(var t=0;0>t;t++)this.createEnemy();this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),this.upperRight=this.game.input.keyboard.addKey(Phaser.Keyboard.Q),this.upperLeft=this.game.input.keyboard.addKey(Phaser.Keyboard.E),this.sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.keyPressDuration=5,this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.Q,Phaser.Keyboard.W,Phaser.Keyboard.E,Phaser.Keyboard.A,Phaser.Keyboard.D,Phaser.Keyboard.S,Phaser.Keyboard.SPACEBAR])}},{key:"update",value:function(){if(0===this.enemies.total)for(var t=0;3>t;t++)this.createEnemy();this.game.physics.arcade.collide(this.player,this.layer1)?this.player.onGround=!0:this.player.onGround=!1,this.game.physics.arcade.collide(this.layer1,this.enemies),(this.sKey.isDown&&this.sKey.downDuration(this.keyPressDuration)||this.upKey.isDown&&this.upKey.downDuration(this.keyPressDuration))&&this.player.inputUp(),this.upperLeft.isDown&&this.upperLeft.downDuration(this.keyPressDuration)&&(this.player.dashReset(),this.player.jump()),this.upperRight.isDown&&this.upperRight.downDuration(this.keyPressDuration)&&(this.player.dashReset(),this.player.jump()),this.downKey.isDown&&this.downKey.downDuration(this.keyPressDuration)&&this.player.inputDown(),this.game.input.mousePointer.isDown&&this.player.acivteInput(this.game.input.mousePointer),this.leftKey.isDown&&(p=!0,this.player.inputLeft()),this.rightKey.isDown&&(p=!0,this.player.inputRight()),this.game.input.pointer1.isDown&&(y=!0,this.game.input.pointer1.x>this.game.width/2?this.player.inputRight():this.player.inputLeft()),(this.leftKey.isUp&&this.rightKey.isUp&&p||this.game.input.pointer1.isUp&&y)&&(p=!1,y=!1,this.player.inputCharged()),this.game.physics.arcade.overlap(this.player.gun,this.enemies,function(t,e){e.hitEnemy(t.attackType)},null,this),this.game.physics.arcade.overlap(this.player,this.enemies,function(t,e){t.dashing?(console.log(t.dashing),1===Math.round(Math.random())&&e.knockResist&&(e.knockResistance+=1),e.knockResist=!1,t.body.velocity.x=0,t.dashAttack()):e.isAttacking||e.hitEnemy("collision_")},null,this)}},{key:"createEnemy",value:function(){this.enemy=new d.default(this.game,this.game.world.randomX,this.game.world.height-100,0,this.player),this.game.add.existing(this.enemy),this.enemies.add(this.enemy)}},{key:"render",value:function(){this.game.debug.spriteInfo(this.player,32,450),this.game.debug.body(this.player),this.game.debug.body(this.player.gun),this.game.debug.pointer(this.game.input.activePointer),this.game.debug.pointer(this.game.input.pointer1),this.game.debug.pointer(this.game.input.pointer2),this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")}}]),e}(Phaser.State);i.default=m},{"../prefabs/avatar":2,"../prefabs/hero":3,"../prefabs/zombie":4}],7:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(){return a(this,e),s(this,Object.getPrototypeOf(e).call(this))}return o(e,t),n(e,[{key:"create",value:function(){var t=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),e}(Phaser.State);i.default=r},{}],8:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(){return a(this,e),s(this,Object.getPrototypeOf(e).call(this))}return o(e,t),n(e,[{key:"create",value:function(){var t=this.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.ship=this.game.add.sprite(100,100,"ship"),this.input.onDown.add(this.startGame,this)}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),e}(Phaser.State);i.default=r},{}],9:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t){function e(){a(this,e);var t=s(this,Object.getPrototypeOf(e).call(this));return t.asset=null,t.ready=!1,t}return o(e,t),n(e,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){this.game.state.start("running")}},{key:"loadResources",value:function(){this.game.load.tilemap("floating_garden","assets/floating_garden.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap("floating_garden_big","assets/floating_garden_big.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.tilemap("floating_garden_medium","assets/floating_garden_medium.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.image("mountain_tiles","assets/mountain_tiles.png"),this.game.load.image("floating_garden_infinite","assets/garden_tilesprite.png"),this.game.load.image("mBG","assets/mountain.png"),this.game.load.image("smBG","assets/whiteclouds.png"),this.game.load.image("rocket","assets/rocket.png"),this.game.load.image("ship","assets/ship.png"),this.game.load.spritesheet("avatar","assets/avatar.png",32,41,8),this.game.load.spritesheet("goblin_soldier","assets/goblin_soldier_walk.png",20,36,10),this.game.load.spritesheet("horse","assets/horse.png",98,61,11),this.game.load.spritesheet("hero","assets/hero.png",50,52,18)}},{key:"onLoadComplete",value:function(){this.ready=!0}}]),e}(Phaser.State);i.default=r},{}],10:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);
}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),h=t("../prefabs/avatar"),c=a(h),l=0,u=0,d=function(t){function e(){return s(this,e),o(this,Object.getPrototypeOf(e).call(this))}return n(e,t),r(e,[{key:"preload",value:function(){this.game.time.advancedTiming=!0}},{key:"create",value:function(){this.game.world.setBounds(0,0,this.game.world.width,this.game.world.height),console.log(this.game.world.width,this.game.world.height),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.background1=this.game.add.tileSprite(0,this.game.height-this.game.cache.getImage("mBG").height,this.game.width,this.game.cache.getImage("mBG").height,"mBG"),this.background2=this.game.add.tileSprite(0,this.game.height/2-this.game.cache.getImage("smBG").height,this.game.width,this.game.cache.getImage("smBG").height,"smBG"),this.tilesprite=this.game.add.tileSprite(0,this.game.world.height-16,1600,16,"floating_garden_infinite"),this.game.physics.enable(this.tilesprite),this.tilesprite.body.immovable=!0,this.tilesprite.body.allowGravity=!1,this.rocket=this.game.add.sprite(-100,0,"rocket"),this.player=new c.default(this.game,100,this.game.height-100,0,this.rocket,(!0)),this.game.add.existing(this.player),this.player.tilespriteInfin=!0,this.enemies=this.game.add.group();for(var t=0;2>t;t++)this.createEnemy(this.enemies);this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.A),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.S),this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.W),this.sKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.keyPressDuration=10,this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.W,Phaser.Keyboard.A,Phaser.Keyboard.D,Phaser.Keyboard.S,Phaser.Keyboard.SPACEBAR])}},{key:"update",value:function(){this.tilesprite.tilePosition.x+=-this.player.velocityX/150,this.background1.tilePosition.x+=-this.player.velocityX/1e3,this.background2.tilePosition.x+=-this.player.velocityX/1e4,this.game.physics.arcade.collide(this.player,this.tilesprite)?this.player.onGround=!0:this.player.onGround=!1,this.game.physics.arcade.collide(this.player,this.enemies),this.game.physics.arcade.overlap(this.player.gun,this.enemies,function(t,e){e.health--,0===e.health&&(this.createEnemy(this.enemies),e.kill(),this.game.state.start("game")),t.kill()},null,this),(this.sKey.isDown&&this.sKey.downDuration(this.keyPressDuration)||this.upKey.isDown&&this.upKey.downDuration(this.keyPressDuration))&&this.player.jump(),this.leftKey.isDown&&this.leftKey.downDuration(this.keyPressDuration)&&this.player.inputLeft(),this.rightKey.isDown&&this.rightKey.downDuration(this.keyPressDuration)&&this.player.inputRight(),this.downKey.isDown&&this.downKey.downDuration(this.keyPressDuration)&&this.player.inputDown(),this.game.input.activePointer.isDown&&this.player.acivteInput(this.game.input.activePointer),l=this.player.velocityX/3,this.enemies.forEach(function(t){u+=l,t.body.velocity.x=-l})}},{key:"createEnemy",value:function(t){this.enemy=t.create(this.game.world.randomX,this.game.world.randomY,"ship"),this.game.physics.enable(this.enemy,Phaser.Physics.ARCADE),this.enemy.enableBody=!0,this.enemy.health=10,this.enemy.scale.setTo(.3)}},{key:"render",value:function(){this.game.debug.spriteInfo(this.player,32,450),this.game.debug.pointer(this.game.input.activePointer),this.game.debug.pointer(this.game.input.pointer1),this.game.debug.text(this.game.time.fps||"--",2,14,"#00ff00")}}]),e}(Phaser.State);i.default=d},{"../prefabs/avatar":2}]},{},[1]);
